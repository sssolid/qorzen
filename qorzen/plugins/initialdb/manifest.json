{
  "name": "initialdb",
  "display_name": "InitialDB",
  "version": "1.0.0",
  "description": "Vehicle Component Database Plugin",
  "author": {
    "name": "Qorzen Team",
    "email": "developers@qorzen.com",
    "url": "https://qorzen.com",
    "organization": "Qorzen"
  },
  "license": "MIT",
  "homepage": "https://qorzen.com/plugins/initialdb",
  "capabilities": [
    "ui.extend",
    "event.subscribe",
    "event.publish",
    "config.read",
    "config.write",
    "database.read",
    "file.read",
    "file.write"
  ],
  "dependencies": [
    {
      "name": "core",
      "version": ">=0.1.0"
    }
  ],
  "entry_point": "plugin.py",
  "min_core_version": "0.1.0",
  "tags": ["database", "vehicle", "components", "automotive"],
  "extension_points": [],
  "extension_uses": [],
  "lifecycle_hooks": {
    "pre_install": "initialdb.code.hooks.pre_install",
    "post_install": "initialdb.code.hooks.post_install",
    "pre_uninstall": "initialdb.code.hooks.pre_uninstall",
    "post_uninstall": "initialdb.code.hooks.post_uninstall",
    "pre_update": "initialdb.code.hooks.pre_update",
    "post_update": "initialdb.code.hooks.post_update",
    "post_enable": "initialdb.code.hooks.post_enable",
    "post_disable": "initialdb.code.hooks.post_disable"
  },
  "config_schema": {
    "fields": [
      {
        "name": "connection_string",
        "type": "string",
        "label": "Database Connection String",
        "description": "Connection string for the vehicle components database",
        "required": true,
        "default_value": "postgresql+asyncpg://postgres:postgres@192.168.10.234/crown_nexus",
        "order": 1,
        "group": "database"
      },
      {
        "name": "default_query_limit",
        "type": "integer",
        "label": "Default Query Limit",
        "description": "Default maximum number of results to return in queries",
        "required": true,
        "default_value": 1000,
        "order": 2,
        "group": "database",
        "validation_rules": [
          {
            "rule_type": "min",
            "parameters": {"value": 10},
            "error_message": "Default query limit must be at least 10"
          },
          {
            "rule_type": "max",
            "parameters": {"value": 10000},
            "error_message": "Default query limit cannot exceed 10000"
          }
        ]
      },
      {
        "name": "max_query_limit",
        "type": "integer",
        "label": "Maximum Query Limit",
        "description": "Maximum number of results to return in queries (hard limit)",
        "required": true,
        "default_value": 10000,
        "order": 3,
        "group": "database",
        "validation_rules": [
          {
            "rule_type": "min",
            "parameters": {"value": 1000},
            "error_message": "Maximum query limit must be at least 1000"
          },
          {
            "rule_type": "max",
            "parameters": {"value": 50000},
            "error_message": "Maximum query limit cannot exceed 50000"
          }
        ]
      },
      {
        "name": "enable_caching",
        "type": "boolean",
        "label": "Enable Caching",
        "description": "Whether to cache database queries to improve performance",
        "default_value": true,
        "order": 4,
        "group": "database"
      },
      {
        "name": "cache_timeout",
        "type": "integer",
        "label": "Cache Timeout (seconds)",
        "description": "Time in seconds before cached data expires",
        "default_value": 300,
        "order": 5,
        "group": "database",
        "conditional_display": {
          "field": "enable_caching",
          "value": true
        },
        "validation_rules": [
          {
            "rule_type": "min",
            "parameters": {"value": 60},
            "error_message": "Cache timeout must be at least 60 seconds"
          },
          {
            "rule_type": "max",
            "parameters": {"value": 3600},
            "error_message": "Cache timeout cannot exceed 3600 seconds (1 hour)"
          }
        ]
      },
      {
        "name": "exports_dir",
        "type": "string",
        "label": "Exports Directory",
        "description": "Directory for exported files",
        "default_value": "exports",
        "order": 1,
        "group": "export"
      },
      {
        "name": "templates_dir",
        "type": "string",
        "label": "Templates Directory",
        "description": "Directory for export templates",
        "default_value": "templates",
        "order": 2,
        "group": "export"
      },
      {
        "name": "ui_refresh_interval_ms",
        "type": "integer",
        "label": "UI Refresh Interval (ms)",
        "description": "How frequently to refresh the UI in milliseconds",
        "default_value": 500,
        "order": 1,
        "group": "ui",
        "validation_rules": [
          {
            "rule_type": "min",
            "parameters": {"value": 100},
            "error_message": "Refresh interval must be at least 100ms"
          },
          {
            "rule_type": "max",
            "parameters": {"value": 10000},
            "error_message": "Refresh interval cannot exceed 10000ms (10 seconds)"
          }
        ]
      },
      {
        "name": "log_level",
        "type": "select",
        "label": "Log Level",
        "description": "The level of detail for plugin logs",
        "default_value": "info",
        "options": [
          {"value": "debug", "label": "Debug"},
          {"value": "info", "label": "Info"},
          {"value": "warning", "label": "Warning"},
          {"value": "error", "label": "Error"}
        ],
        "order": 1,
        "group": "advanced"
      }
    ],
    "groups": [
      {
        "name": "database",
        "label": "Database Settings",
        "description": "Database connection and query settings",
        "order": 1,
        "collapsed": false
      },
      {
        "name": "export",
        "label": "Export Settings",
        "description": "Settings for data exports",
        "order": 2,
        "collapsed": false
      },
      {
        "name": "ui",
        "label": "UI Settings",
        "description": "User interface settings",
        "order": 3,
        "collapsed": false
      },
      {
        "name": "advanced",
        "label": "Advanced Settings",
        "description": "Advanced configuration options",
        "order": 4,
        "collapsed": true
      }
    ]
  }
}